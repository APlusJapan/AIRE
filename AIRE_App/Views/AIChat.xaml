<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:ViewModels="clr-namespace:AIRE_App.ViewModels"
             xmlns:TemplateSelector="clr-namespace:AIRE_App.Data.TemplateSelector"
             x:DataType="ViewModels:AIStatusViewModel"
             x:Class="AIRE_App.Views.AIChatView">

    <ContentPage.Resources>
        <DataTemplate x:Key="UserTemplate" x:DataType="{x:Type ViewModels:MessageViewModel}">
            <StackLayout>
                <Label Text="{Binding Text}" Padding="16,0,16,0" HorizontalTextAlignment="End"/>
            </StackLayout>
        </DataTemplate>
        <DataTemplate x:Key="AssistantTemplate" x:DataType="{x:Type ViewModels:MessageViewModel}">
            <StackLayout>
                <Label Text="{Binding Text}" Padding="16,0,16,0" HorizontalTextAlignment="Start"/>
            </StackLayout>
        </DataTemplate>

        <TemplateSelector:MessageTemplateSelector
            x:Key="MessageTemplateSelector"
            UserTemplate="{StaticResource UserTemplate}"
            AssistantTemplate="{StaticResource AssistantTemplate}" />
    </ContentPage.Resources>

    <ScrollView>
        <CollectionView
            ItemsSource="{Binding MessageHistory}"
            ItemTemplate="{StaticResource MessageTemplateSelector}">
        </CollectionView>
    </ScrollView>

</ContentPage>
